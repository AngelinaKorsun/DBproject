(this.webpackJsonpinstaz=this.webpackJsonpinstaz||[]).push([[0],{138:function(e,t,a){e.exports=a(296)},296:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(56),i=a.n(s),c=a(1),o=a(25),l=a(30),m=a(13),u=a(133),d=a(2),p=a(3),h=a(5),E=a(4),f=a(6),v=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",{className:"ui large borderless menu"},r.a.createElement(c.b,{className:"header item",to:"/"},"Instaz"),r.a.createElement(c.b,{className:"right floated item",to:"/login"},"Login"),r.a.createElement(c.b,{className:"item",to:"/signup"},"Signup")),t=r.a.createElement("div",{className:"ui large borderless menu"},r.a.createElement(c.b,{className:"header item",to:"/"},"Instaz"),r.a.createElement("a",{className:"clickable right floated item",onClick:this.props.logoutUser},"Logout"));return r.a.createElement("div",{className:"ui grid Header"},r.a.createElement("div",{className:"computer only row"},r.a.createElement("div",{className:"column"},this.props.currentUser?t:e)),r.a.createElement("div",{className:"tablet mobile only row"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"ui large borderless menu"},r.a.createElement(c.b,{className:"header item",to:"/"},"Instaz"),r.a.createElement("a",{id:"mobile_item",className:"item right floated"},r.a.createElement("i",{className:"bars icon"}))))))}}]),t}(r.a.Component),g=a(31),b=a(11),N=a.n(b),y=a(134),O=a.n(y).a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL});O.interceptors.request.use((function(e){var t=window.localStorage.getItem("jwt");return t&&(e.headers=Object.assign({Authorization:"Token ".concat(t)},e.headers)),e}));var w=O,j=function(){return{type:"LOGOUT_USER"}},U=function(e){return function(t){return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(w.post("/posts/".concat(e,"/like/")).then((function(a){t({type:"TOGGLE_POST_LIKE",payload:{postId:e}})}),(function(e){t({type:"TOGGLE_POST_LIKE_FAILURE",payload:e.response?e.response.data:e.message})})));case 2:case"end":return a.stop()}}))}},k=function(e){var t=e.post,a=e.message;return function(e){return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.awrap(w.post("/comments/",{post:t,message:a}).then((function(t){e({type:"ADD_COMMENT",payload:t.data})}),(function(t){e({type:"ADD_COMMENT_FAILURE",payload:t.response?t.response.data:t.message})})));case 2:case"end":return n.stop()}}))}},P=function(e){return function(t){var a;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new FormData,Object.keys(e).forEach((function(t){"image"===t&&"string"===typeof e[t]||a.append(t,e[t])})),n.next=4,N.a.awrap(w.patch("/posts/".concat(e.id,"/"),a,{headers:{"content-type":"multipart/form-data"}}).then((function(e){t({type:"EDIT_POST",payload:e.data})}),(function(e){t({type:"EDIT_POST_FAILURE",payload:e.response?e.response.data:e.message})})));case 4:case"end":return n.stop()}}))}},S=a(9),C=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"extra content"},r.a.createElement(S.c,{initialValues:{message:"",post:this.props.post.id},onSubmit:function(t,a){var n=a.resetForm;e.props.addComment(t).then((function(e){n(),t.message=""}))}},(function(t){var a=t.values,n=(t.errors,t.touched,t.isSubmitting),s=t.handleChange;return r.a.createElement(S.b,{className:n?"ui loading form":"ui form"},r.a.createElement("div",{className:"ui large transparent left icon input"},r.a.createElement("i",{className:"comment outline icon"}),r.a.createElement("input",{className:"comment-field",id:e.props.elementId,type:"text",name:"message",maxLength:"400",placeholder:"Add Comment...",onChange:s,value:a.message})))})))}}]),t}(r.a.Component),_=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={isArchiving:!1,redirectToHome:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;if(this.state.redirectToHome)return r.a.createElement(o.a,{to:"/"});var t=this.props,a=t.currentUser,n=t.post,s=t.isPreview,i=t.showActions;return r.a.createElement("div",{className:"ui fluid card"},r.a.createElement("div",{className:"content"},r.a.createElement(c.b,{className:"ui right floated sub header",to:"/p/".concat(n.id)},n.timesince_posted," ago"),r.a.createElement(c.b,{className:"ui left floated small header",to:"/u/".concat(n.author.username)},r.a.createElement("img",{className:"ui avatar image",src:n.author.avatar,alt:"".concat(n.author.username,"'s avatar")}),n.author.username)),r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:n.image,alt:n.caption})),i?function(t,a){return r.a.createElement("div",{className:"content action-icons"},r.a.createElement("i",{onClick:function(){return e.props.likePost(a.id)},className:"clickable big heart like icon"+(a.is_liked?" red":"")}),r.a.createElement("i",{onClick:function(){document.getElementById("comment-field".concat(a.id)).focus()},className:"clickable big comment outline link icon"}),r.a.createElement("i",{className:"clickable big share icon"}),a.author.username===t.username?r.a.createElement("span",{className:"clickable right floated","data-inverted":"","data-tooltip":e.state.isArchiving?"Archiving...":"Archive this post","data-position":"top center",onClick:function(){e.setState({isArchiving:!0}),e.props.editPost(Object(g.a)({},a,{is_active:!1})).then((function(){e.setState({isArchiving:!1,redirectToHome:!s})}))}},r.a.createElement("i",{className:(e.state.isArchiving?"ui loading circle notch":"archive icon")+" big link icon"})):null)}(a,n):null,r.a.createElement("div",{className:"relaxed content"},r.a.createElement("p",{className:"ui sub header"},n.likes," likes"),r.a.createElement("p",{className:"post-description"},r.a.createElement(c.b,{className:"ui left floated small header author",to:"/u/".concat(n.author.username)},n.author.username),n.caption&&n.caption.length>120&&s?function(e){var t=e.id,a=e.caption;return r.a.createElement("span",null,a+"..."," ",r.a.createElement(c.b,{className:"ui sub header",to:"/p/".concat(t)},"View full caption"))}(n):n.caption),n.comments.length>0?r.a.createElement("div",{className:"ui divider"}):null,n.comments.map((function(e,t){return s&&t>2?null:r.a.createElement("p",{key:e.id},r.a.createElement(c.b,{className:"ui left floated small header",to:"/u/".concat(e.author.username)},e.author.username),e.message)})),s&&n.comments.length>3?r.a.createElement(c.b,{className:"ui left floated sub header",to:"/p/".concat(n.id)},"View all comments"):null),i?r.a.createElement(C,{post:n,addComment:this.props.addComment,elementId:"comment-field".concat(n.id)}):null)}}]),t}(r.a.Component),T=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPosts()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"left aligned nine wide computer sixteen wide mobile column post-list"},this.props.posts.map((function(t){return r.a.createElement(_,{key:t.id,post:t,currentUser:e.props.currentUser,editPost:e.props.editPost,addComment:e.props.addComment,likePost:e.props.likePost,showActions:!!e.props.currentUser,isPreview:!0})})))}}]),t}(r.a.Component),I=Object(m.b)((function(e){return{posts:e.posts}}),{addComment:k,editPost:P,fetchPosts:function(){return function(e){var t;return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(w.get("/posts"));case 2:t=a.sent,e({type:"FETCH_POSTS",payload:t});case 4:case"end":return a.stop()}}))}},likePost:U})(T),A=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this,a=r.a.createElement("div",{className:"ui vertical menu sticky-menu"},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"ui input"},r.a.createElement("input",{type:"text",placeholder:"Search..."}))),r.a.createElement(c.b,{className:"item",to:"/login"},r.a.createElement("i",{className:"sign-in icon"})," Login"),r.a.createElement(c.b,{className:"item",to:"/signup"},r.a.createElement("i",{className:"user plus icon"})," Signup"));return r.a.createElement("div",{className:"four wide column computer only"},this.props.currentUser?(e=this.props.currentUser,r.a.createElement("div",{className:"sticky-menu"},r.a.createElement("div",{className:"user-info"},r.a.createElement(c.b,{className:"ui medium header",to:"/u/".concat(e.username)},r.a.createElement("img",{className:"ui avatar image",src:e.avatar,alt:"".concat(e.username,"'s avatar")}),e.username)),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement(c.b,{className:"ui labeled button add-button",tabIndex:"0",to:"/p/new"},r.a.createElement("div",{className:"ui black button"},r.a.createElement("i",{className:"plus square outline icon"})," Add Post")),r.a.createElement("div",{className:"ui vertical menu"},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"ui input"},r.a.createElement("input",{type:"text",placeholder:"Search..."}))),r.a.createElement("a",{className:"item"},r.a.createElement("i",{className:"user icon"})," Profile"),r.a.createElement("a",{className:"item"},r.a.createElement("i",{className:"archive icon"})," Archive"),r.a.createElement("a",{className:"item"},"Messages",r.a.createElement("div",{className:"ui label"},"0")),r.a.createElement("a",{className:"item",onClick:t.props.logoutUser},r.a.createElement("i",{className:"sign-out icon"})," Logout")))):a)}}]),t}(r.a.Component),L=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},r.a.createElement("div",{className:"ui container center aligned"},r.a.createElement("div",{className:"ui three column stackable grid"},r.a.createElement("div",{className:"two wide column computer only"}),r.a.createElement(I,{currentUser:this.props.currentUser}),r.a.createElement(A,{currentUser:this.props.currentUser,logoutUser:this.props.logoutUser}))))}}]),t}(r.a.Component),x=a(12),R=function(e){var t=e.errors;return t&&t.length>0?r.a.createElement("div",{className:"ui error message"},r.a.createElement("div",{className:"header"},"There were some errors with your submission"),r.a.createElement("ul",{className:"list"},t.map((function(e,t){return r.a.createElement("li",{key:t},e)})))):null},D=x.object().shape({username:x.string().required("This field is required"),password:x.string().required("This field is required")}),F=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Login"},r.a.createElement("div",{className:"ui container segment"},r.a.createElement("h2",{className:"ui center aligned header"},r.a.createElement("div",{className:"content"},"Login",r.a.createElement("div",{className:"sub header"},"Don't have an account yet? ",r.a.createElement(c.b,{to:"/signup"},"Signup")," for an account!"))),r.a.createElement(R,{errors:this.props.errorMessages}),r.a.createElement(S.c,{initialValues:{username:"",password:""},validationSchema:D,onSubmit:function(t,a){var n=a.setSubmitting;e.props.loginUser(t).then((function(e){n(!1)}))}},(function(e){var t=e.values,a=(e.errors,e.touched,e.isSubmitting),n=e.handleChange;return r.a.createElement(S.b,{className:a?"ui loading form":"ui form"},r.a.createElement("div",{className:"required field"},r.a.createElement("label",null,"Username"),r.a.createElement("div",{className:"ui left icon input"},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:n,value:t.username}),r.a.createElement("i",{className:"user icon"})),r.a.createElement(S.a,{className:"error",name:"username",component:"div"})),r.a.createElement("div",{className:"required field"},r.a.createElement("label",null,"Password"),r.a.createElement("div",{className:"ui left icon input"},r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:n,value:t.password}),r.a.createElement("i",{className:"lock icon"})),r.a.createElement(S.a,{className:"error",name:"password",component:"div"})),r.a.createElement("button",{className:"ui button",type:"submit"},"Submit"))})),this.props.currentUser?r.a.createElement(o.a,{to:"/"}):null))}}]),t}(r.a.Component),M=Object(m.b)((function(e){return{errorMessages:e.errorMessages,currentUser:e.currentUser}}),{loginUser:function(e){return function(t){return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(w.post("/users/auth/login/",Object(g.a)({},e)).then((function(e){t({type:"LOGIN_USER",payload:e.data})}),(function(e){t({type:"LOGIN_USER_FAILURE",payload:e.response?e.response.data:e.message})})));case 2:case"end":return a.stop()}}))}}})(F),q=x.object().shape({username:x.string().required("This field is required"),email:x.string().email("Please provide a valid email").required("This field is required"),password:x.string().required("This field is required"),passwordConfirmation:x.string().oneOf([x.ref("password"),null],"Passwords must match")}),G=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Signup"},r.a.createElement("div",{className:"ui container segment"},r.a.createElement("h2",{className:"ui center aligned header"},r.a.createElement("div",{className:"content"},"Signup",r.a.createElement("div",{className:"sub header"},"Already have an account? Use it to ",r.a.createElement(c.b,{to:"/login"},"login"),"!"))),r.a.createElement(R,{errors:this.props.errorMessages}),r.a.createElement(S.c,{initialValues:{username:"",email:"",password:"",passwordConfirmation:""},validationSchema:q,onSubmit:function(t,a){var n=a.setSubmitting;e.props.registerUser(t).then((function(e){n(!1)}))}},(function(e){var t=e.values,a=(e.errors,e.touched,e.isSubmitting),n=e.handleChange;return r.a.createElement(S.b,{className:a?"ui loading form":"ui form"},r.a.createElement("div",{className:"required field"},r.a.createElement("label",null,"Username"),r.a.createElement("div",{className:"ui left icon input"},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:n,value:t.username}),r.a.createElement("i",{className:"user icon"})),r.a.createElement(S.a,{className:"error",name:"username",component:"div"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Email address"),r.a.createElement("div",{className:"ui left icon input"},r.a.createElement("input",{type:"email",name:"email",placeholder:"Email address",onChange:n,value:t.email}),r.a.createElement("i",{className:"envelope outline icon"})),r.a.createElement(S.a,{className:"error",name:"email",component:"div"})),r.a.createElement("div",{className:"required field"},r.a.createElement("label",null,"Password"),r.a.createElement("div",{className:"ui left icon input"},r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:n,value:t.password}),r.a.createElement("i",{className:"lock icon"})),r.a.createElement(S.a,{className:"error",name:"password",component:"div"})),r.a.createElement("div",{className:"required field"},r.a.createElement("label",null,"Password Confirmation"),r.a.createElement("div",{className:"ui left icon input"},r.a.createElement("input",{type:"password",name:"passwordConfirmation",placeholder:"Password Confirmation",onChange:n,value:t.passwordConfirmation}),r.a.createElement("i",{className:"lock icon"})),r.a.createElement(S.a,{className:"error",name:"passwordConfirmation",component:"div"})),r.a.createElement("button",{className:"ui button",type:"submit"},"Submit"))})),this.props.currentUser?r.a.createElement(o.a,{to:"/"}):null))}}]),t}(r.a.Component),V=Object(m.b)((function(e){return{errorMessages:e.errorMessages,currentUser:e.currentUser}}),{registerUser:function(e){return function(t){return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(w.post("/users/auth/signup/",Object(g.a)({},e)).then((function(e){t({type:"NEW_USER",payload:e.data})}),(function(e){t({type:"NEW_USER_FAILURE",payload:e.response?e.response.data:e.message})})));case 2:case"end":return a.stop()}}))}}})(G),W=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.viewPost(this.props.match.params.id)}},{key:"render",value:function(){var e,t=this,a=r.a.createElement("div",{className:"ui segment loading-div"},r.a.createElement("div",{className:"ui active inverted dimmer"},r.a.createElement("div",{className:"ui massive text loader"},"Loading")));return r.a.createElement("div",{className:"PostDetail"},r.a.createElement("div",{className:"ui container center aligned"},this.props.currentPost?(e=this.props.currentPost,r.a.createElement("div",{className:"ui three column stackable grid"},r.a.createElement("div",{className:"two wide column computer only"}),r.a.createElement("div",{className:"left aligned nine wide computer sixteen wide mobile column"},r.a.createElement(_,{key:e.id,post:e,currentUser:t.props.currentUser,addComment:t.props.addComment,editPost:t.props.editPost,likePost:t.props.likePost,showActions:!!t.props.currentUser,isPreview:!1})),r.a.createElement(A,{currentUser:t.props.currentUser,logoutUser:t.props.logoutUser}))):a))}}]),t}(r.a.Component),z=Object(m.b)((function(e){return{currentPost:e.currentPost,currentUser:e.currentUser}}),{addComment:k,editPost:P,likePost:U,logoutUser:j,viewPost:function(e){return function(t){return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(w.get("/posts/".concat(e,"/")).then((function(e){t({type:"VIEW_POST",payload:e.data})}),(function(e){t({type:"VIEW_POST_FAILURE",payload:e.response?e.response.data:e.message})})));case 2:case"end":return a.stop()}}))}}})(W),H=["image/jpg","image/jpeg","image/gif","image/png"],B=x.object().shape({image:x.mixed().required("This field is required").test("fileSize","File too large (should not be bigger than 3 MB)",(function(e){return e&&e.size<=3145728})).test("fileFormat","Unsupported Format (Only JPG, PNG, and GIFs are accepted)",(function(e){return e&&H.includes(e.type)})),caption:x.string().max(200,"Caption can only be up to 200 characters.")}),K=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,thumb:void 0,rawFile:null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.file&&e.file!==this.state.rawFile&&this.setState({loading:!0,rawFile:e.file},(function(){var a=new FileReader;a.onloadend=function(){t.setState({loading:!1,thumb:a.result})},a.readAsDataURL(e.file)}))}},{key:"render",value:function(){var e=this.props.file,t=this.state,a=t.loading,n=t.thumb;return e?a?r.a.createElement("p",null,"Loading..."):r.a.createElement("div",null,r.a.createElement("div",{className:"ui tiny header"},"Preview:"),r.a.createElement("img",{src:n,alt:e.name,className:"ui centered bordered medium image"})):null}}]),t}(r.a.Component),J=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={createdPost:null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return null===this.props.currentUser?r.a.createElement(o.a,{to:"/login"}):null!==this.state.createdPost?r.a.createElement(o.a,{to:"/p/".concat(this.state.createdPost.id)}):r.a.createElement("div",{className:"PostForm"},r.a.createElement("div",{className:"ui container segment"},r.a.createElement("h2",{className:"ui center aligned header"},r.a.createElement("div",{className:"content"},"Add Post",r.a.createElement("div",{className:"sub header"},"Share a moment with everyone!"))),r.a.createElement(R,{errors:this.props.errorMessages}),r.a.createElement(S.c,{initialValues:{image:null,caption:""},validationSchema:B,onSubmit:function(t,a){var n=a.setSubmitting;a.props;e.props.addPost(t).then((function(t){n(!1),e.setState({createdPost:e.props.currentPost})}))}},(function(e){var t=e.values,a=(e.errors,e.touched,e.isSubmitting),n=e.handleChange,s=e.setFieldValue;return r.a.createElement(S.b,{className:a?"ui loading form":"ui form"},r.a.createElement("div",{className:"required field"},r.a.createElement("label",null,"Image"),r.a.createElement("div",{className:"ui left icon input"},r.a.createElement("input",{type:"file",name:"image",placeholder:"Image",onChange:function(e){s("image",e.currentTarget.files[0])}}),r.a.createElement("i",{className:"file image icon"})),r.a.createElement(S.a,{className:"error",name:"image",component:"div"})),r.a.createElement(K,{file:t.image}),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Caption"),r.a.createElement("div",{className:"ui left icon input"},r.a.createElement("input",{type:"caption",name:"caption",placeholder:"Caption",onChange:n,value:t.caption}),r.a.createElement("i",{className:"quote left icon"})),r.a.createElement(S.a,{className:"error",name:"caption",component:"div"})),r.a.createElement("button",{className:"ui button",type:"submit"},"Submit"))}))))}}]),t}(r.a.Component),$=Object(m.b)((function(e){return{errorMessages:e.errorMessages,currentUser:e.currentUser,currentPost:e.currentPost}}),{addPost:function(e){var t=e.image,a=e.caption;return function(e){var n;return N.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return(n=new FormData).append("image",t),n.append("caption",a),r.next=5,N.a.awrap(w.post("/posts/",n,{headers:{"content-type":"multipart/form-data"}}).then((function(t){e({type:"ADD_POST",payload:t.data})}),(function(t){e({type:"ADD_POST_FAILURE",payload:t.response?t.response.data:t.message})})));case 5:case"end":return r.stop()}}))}}})(J),Q=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(v,{currentUser:this.props.currentUser,logoutUser:this.props.logoutUser}),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0,component:function(){return r.a.createElement(L,{currentUser:e.props.currentUser,logoutUser:e.props.logoutUser})}}),r.a.createElement(o.b,{path:"/login",component:M}),r.a.createElement(o.b,{path:"/signup",component:V}),r.a.createElement(o.b,{path:"/p/new",component:$}),r.a.createElement(o.b,{path:"/p/:id",component:z})))}}]),t}(r.a.Component),X=Object(m.b)((function(e){return{currentUser:e.currentUser}}),{logoutUser:j})(Q),Y=Object(l.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if("FETCH_POSTS"===t.type)return t.payload.data;if("TOGGLE_POST_LIKE"===t.type)return e.map((function(e){return e.id===t.payload.postId&&(e.is_liked=!e.is_liked,e.likes=e.is_liked?e.likes+1:e.likes-1),e}));if("ADD_COMMENT"===t.type)return e.map((function(e){return e.id===t.payload.post&&e.comments.push(t.payload),e}));if("EDIT_POST"===t.type){var a=[];return e.forEach((function(e){e.id===t.payload.id?t.payload.is_active&&a.push(t.payload):a.push(e)})),a}return e},currentPost:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=null===e?null:Object(g.a)({},e);return"VIEW_POST"===t.type?t.payload:("TOGGLE_POST_LIKE"===t.type&&null!==e&&e.id===t.payload.postId&&(a.is_liked=!a.is_liked,a.likes=a.is_liked?a.likes+1:a.likes-1),"ADD_COMMENT"===t.type&&null!==e&&e.id===t.payload.post&&a.comments.push(t.payload),"ADD_POST"===t.type&&(a=t.payload),e=a)},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":case"NEW_USER":return t.payload;case"LOGOUT_USER":return null;default:return e}},errorMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(t.type.includes("FAILURE"))if("string"===typeof t.payload)e=[t.payload];else{var a=[];Object.keys(t.payload).forEach((function(e){"string"===typeof t.payload[e]?a.push(t.payload[e]):a=a.concat(t.payload[e]||[])})),e=a}else e=[];return e}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=Object(l.d)(Y,Object(l.a)(u.a,(function(e){return function(e){return function(t){["LOGIN_USER","NEW_USER"].includes(t.type)?t.payload.token&&window.localStorage.setItem("jwt",t.payload.token):"LOGOUT_USER"===t.type&&window.localStorage.removeItem("jwt"),e(t)}}})));i.a.render(r.a.createElement(c.a,null,r.a.createElement(m.a,{store:Z},r.a.createElement("div",null,r.a.createElement(o.b,{path:"/",component:X})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[138,1,2]]]);
//# sourceMappingURL=main.b95a5924.chunk.js.map